<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width,initial-scale=1">
	<title>"Strings"</title>
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;800&display=swap">
	<link rel="stylesheet" type="text/css" href="strings/css/style.css">
	<link rel="stylesheet" type="text/css" href="strings/css/entrance.css">
	<link rel="stylesheet" type="text/css" href="strings/api/css/alertify.min.css">
	<script src="strings/api/alertify.min.js"></script>
	<script src="strings/js/cookie.class.js"></script>
	<script src="strings/js/ajax.class.js"></script>
	<script src="strings/js/common.js"></script>
	<script src="strings/js/entrance.js"></script>
</head>
<template id="template_fragment">
	<label>
		<select>
			<option value="none" label="（選択なし）" selected>何も持たないままゲームを開始します。</option>
			{% for f in fragment %}<option label="{{f.name}}">{{f.lore}}</option>{% endfor %}
		</select>
		<p>何も持たないままゲームを開始します。</p>
	</label>
</template>
<body class="back scroll">
	<div id="blank"></div>
	<div id="main">
		<h1>"Strings"</h1>
		<div><a onclick="toggle_form('login')">ログイン</a><a onclick="toggle_form('register')">新規登録</a></div>
		<div><a href="#summary">ゲーム概要</a><a href="#battle">戦闘システム</a><a href="#rule">利用規約</a></div>
	</div>
	<div id="blank"></div>
	<div id="form">
		<div id="login" class="hide">
			<label>Eno<input type="number" name="eno"></label>
			<label>パスワード<input type="text" name="password"></label>
			<label><button type="button" class="submit" onclick="login()">ログイン</button></label>
		</div>
		<div id="register" class="hide">
			<p>パスワード・初期フラグメント以外の項目は後で変更が可能です。</p>
			<label>パスワード<input type="text" name="password" placeholder="16文字以下"></label>
			<label>表示名<div><input type="text" id="name" name="name" placeholder="16文字以下"><button type="button" onclick="random_name()">ランダム</button></div></label>
			<label>短縮名<div><input type="text" id="acronym" name="acronym" placeholder="1文字"><button type="button" onclick="random_acronym()">ランダム</button></div></label>
			<label>イメージカラー<div><input type="color" id="color" name="color" value="#ffffff"><button type="button" onclick="random_color()">ランダム</button></div></label>
			<h4>初期フラグメント</h4>
			<div id="fragments"></div>
			<label><button type="button" onclick="random_fragment()">ランダムなフラグメントを選択</button></label>
			<label><button type="button" class="submit" onclick="register()">新規登録</button></label>
		</div>
	</div>
	<div id="summary" class="desc">
		<h2>概要</h2>
		<div>
			"Strings"は、文字列のみで展開されるマルチプレイヤーWebRPGです。<br>
			姿や装備、記憶に至るまで、世界のすべては文字列とその欠片によって構成されます。<br>
			プレイヤーは自身のオリジナルキャラクターを登録し、他参加者と交流をしたり、世界を探索したりしていくことになります。
		</div>
		<h2>システム</h2>
		<div>
			この世界において、あなたのキャラクターは『フラグメント』と呼ばれる情報の欠片、それの集合体として表現されます。<br>
			フラグメントの種類は千差万別です。外見的特徴を表すもの、所有物を表すもの、あるいは大事な記憶、思い出などを表すもの。<br>
			そしてそのフラグメントは、ゲーム中に新たに手に入れたり、他者のものを譲り受けたり、奪い取ったりすることになります。<br>
			『金髪碧眼』のフラグメントを手に入れれば、あなたのキャラクターは金髪碧眼となるでしょう。『恋人』のフラグメントを誰かから奪ってしまえば……<br>
		</div>
		<h2>諸注意</h2>
		<div>
			このゲームは、システム上キャラクターに対して非常に重大な確定ロールを何度も繰り返すことになります。<br>
			絶対にロストしても問題のないキャラクターで参加してください。可能ならば新規キャラクターが望ましいです。<br>
			<br>
			ゲーム中にアイコンやプロフィールなど画像を登録する機能は一切予定していません。<br>
			また、X(Twitter)やMisskey等の比較的オープンなコミュニティでキャラクターの外見を表すイラストを公開することを禁止します。<br>
			Discord等の比較的クローズドなコミュニティであれば可能です。また、文章にて表現するぶんには制限を設けません。<br>
			<br>
			情報は <a href="https://twitter.com/untroche_ar" target="_blank">X(Twitter)@untroche_ar</a> で最新のものを掲示しています。<br>
			当サイトには現状お知らせを掲載する機能がありません。余裕があるときに作ります。
		</div>
		<h2>開催期間</h2>
		<div>
			一か月程度（3月いっぱいまで）を予定しています。<br>
			あくまで予定であり、変更される可能性があります。<br>
			終了の際には、遅くとも1週間前には予告を行います。
		</div>
	</div>
	<div id="battle" class="desc">
		<h2>戦闘まで</h2>
		<div>
			このゲームの戦闘は基本的に1対1のPvPとなります。<br>
			NPCとの戦闘も予定していましたが、現在未実装です。<br>
			<br>
			他キャラクターに戦闘を仕掛ける際「勝つつもりで挑む」「負けるつもりで挑む」の選択肢が発生し、<br>
			また受ける側には「話し合う」「逃げる」「勝つつもりで挑む」「負けるつもりで挑む」の選択肢が発生します。<br>
			受ける側は、仕掛けた側がどういったつもりで挑んできたのかわかりません。
			<dl>
				<dd>「話し合う」</dd>
				<dt>戦闘が保留され、相手に個別メッセージを送ることができます。</dt>
				<dd>「逃げる」</dd>
				<dt>戦闘がキャンセルされ、何も起こらず終了します。</dt>
				<dd>「勝つつもりで挑む」</dd>
				<dt>相手も勝つつもりだった場合、戦闘が発生します。相手が負けるつもりだった場合は無条件で勝利します。</dt>
				<dd>「負けるつもりで挑む」</dd>
				<dt>相手も負けるつもりだった場合、戦闘が発生します。相手が勝つつもりだった場合は無条件で敗北します。</dt>
			</dl>
			受ける側がリアクションをして初めて戦闘が発生します。<br>
			戦闘に勝利した場合、相手の所有するフラグメントをランダムに一つ奪い取ります。
		</div>
		<h2>戦闘の流れ</h2>
		<div>
			戦闘時、自身の所持するフラグメントの先頭10個からステータス・スキル設定を作成します。<br>
			挑んだ側を先攻・左側、挑まれた側を後攻・右側として、それぞれが設定されたスキルを順番に繰り返します。<br>
			この1ループを1ターンと呼称します。<br>
			<br>
			戦闘には間合という概念が存在します。彼我の距離を表します。移動系のスキルによってこれを変更しながら戦います。<br>
			初期値は10です。<br>
			<br>
			スキルは、基本的に一番上に設定されたものを発動します。<br>
			スキル効果に「消耗」があるとき、現在の自分のMPが指定の数値未満であればその時点でスキルを中断してひとつ下のスキルの発動を試みます。<br>
			このように条件次第でスキルが中断され、その次のスキルが発動する場合があります。<br>
			<br>
			スキルの効果によって相手、または自分のHPが0以下になった時点で戦闘が終了し、勝敗を決定します。<br>
			またそれ以外にも、ターンが30以上になれば時間切れ（引分）、間合が一定以上開けば逃走として戦闘を終了します。<br>
			引分・逃走で戦闘が終了した場合は、フラグメントの奪い取りなどは発生しません。
		</div>
		<h2>スキルの効果</h2>
		<div>
			スキル効果は、現在特殊な形式で表示されています。<br>
			以下に例を示します。
			<div>8 3 間合 3 2 ATK * / 攻撃</div>
			これを比較的わかりやすい形に整形すると、以下のようになります。
			<div>間合(3 ~ 8) 攻撃(ATK * 2 / 3)</div>
			現在の間合が3以上8以下のとき、相手に対して、自身のATKの2/3のダメージを与えるスキルとなります。<br>
			<br>
			これは<a href="https://ja.wikipedia.org/wiki/%E9%80%86%E3%83%9D%E3%83%BC%E3%83%A9%E3%83%B3%E3%83%89%E8%A8%98%E6%B3%95" target="_blank">逆ポーランド記法</a>と呼ばれる数式の記述方法を、少しアレンジしたものです。<br>
			右辺の値から先に記述し、また関数の概念を加えています。<br>
			わかりづらいので整形後の状態で表示したいのは山々なのですが、一部の特殊なスキルを表現することが困難なため暫定的にこの表示をしています。<br>
			<br>
			<details><summary>ちゃんと理解したい人向けの解説</summary>
				この逆ポーランド記法はスタックマシンというもので扱いやすい形式となっています。<br>
				CloveR Steps様のゲーム<a href="https://soraniwa.428.st/sp" target="_blank">『Supernal Blue』</a>をプレイした方には多少馴染みがある概念かもしれませんが、"Strings"のスキル式はあちらでのキューとほとんど同じことを行います。<br>
				あちらではキューを積んでいって、そのキューがどんどんマッチングしていくという方式となっていました。
				<div>8 3 間合 3 2 ATK * / 攻撃</div>
				このスキルを例にとると、まず最初に 8 という数値がスタックに積まれます。次に 3 が積まれ、現在は 3, 8 という並びになっています。<br>
				間合というのは関数であり、引数を二つとります。スタックから3と8を取り出し、現在の間合がこの範囲に収まっているかの判定をします。<br>
				成功したら、さらにスタックに 3 と 2 を積み、更に使用者のATKぶんの数値を積みます。 ここではATKの数値を仮に 6 とし、6, 2, 3 という並びです。<br>
				* は乗算を行う計算関数であり、引数を二つとり、求められた値をスタックに積みます。6 と 2 が取り出され、12, 3 の並びになります。<br>
				/ も計算関数であり、除算を行います。スタックには 4 の値だけが積まれていることになります。<br>
				攻撃は関数であり、引数を一つとり、相手のHPにダメージを与えます。スタックから 4 が取り出され、結果的に 4ダメージ が与えられることになります。
			</details>
		</div>
	</div>
	<div id="rule" class="desc">
		<h2>利用規約</h2>
		<div>
			<a href="https://vps.xserver.ne.jp/rule/rule.php" target="_blank">https://vps.xserver.ne.jp/rule/rule.php</a><br>
			上記ページのXserverアカウント利用規約4章16条 禁止事項に該当しそうなことをしないでください。<br>
			以下に、このゲームにおいて特に重要そうな項目を抜き出します。
			<div>
				<p>（文中の『弊社』はXserver社のことを、『本サービス』はXserver VPSのことを指します。ただし、ここでは本サービスとは『"Strings"』のことであると読み替えてください。）</p>
				<p>利用者は本サービスを利用するにあたり、以下の各号のいずれかに該当する行為またはそのおそれがある行為をすることはできません。</p>
				<p><span>（１）</span>他の本サービスの利用者、第三者または弊社の知的財産権（著作権、意匠権、特許権、実用新案権、商標権、工業所有権等）及びその他の権利を侵害する行為、また侵害するおそれのある行為</p>
				<p><span>（２）</span>他の本サービスの利用者、第三者または弊社の財産、信用、名誉、プライバシー、肖像権を侵害する行為、または侵害するおそれのある行為</p>
				<p><span>（３）</span>他の本サービスの利用者または第三者の身体、生命、自由、名誉、財産等に対して害悪を加える旨の情報等を掲載する行為</p>
				<p><span>（10）</span>自殺、殺人の方法などを掲載する行為</p>
				<p><span>（11）</span>猥褻な表現を含む情報、または公衆に羞恥心を抱かせるおそれのある情報、その他公衆の射幸心を仰ぐ情報を掲載し、または他の利用者もしくは第三者に提供する行為</p>
				<p><span>（13）</span>未成年者にとって有害と認められる情報の売買、譲受または掲載する行為、それらを助長する行為</p>
				<p><span>（26）</span>サーバーまたはネットワークへ著しく負荷をかける行為</p>
				<cite>Xserverアカウント利用規約4章16条 禁止事項 より一部抜粋</cite>
			</div>
			以下に、さらに要約した文章を掲載します。
			<dl>
				<dd>自分が権利を持つキャラクターで登録してください。また、歌詞などの引用を行わないでください。</dd>
				<dt>ドダイトスとかで登録しちゃ駄目です。歌を歌いたいときはオリジナルソングにするか、改変してください。</dt>
				<dd>他の人の個人情報とかを勝手に喋らないでください。</dd>
				<dt>単に規約違反になるだけでなく、人間関係が破綻するおそれもあります。</dt>
				<dd>あんまり「死ね」とか「殺す」とか言わないでください。</dd>
				<dt>ちょっとなら多分大丈夫です。ただし、キャラクターではなくそのプレイヤーへ向けた暴言は絶対に駄目です。</dt>
				<dd>首の吊り方とかをあまり詳細に描写しないでください。</dd>
				<dt>ショッキングな情報は、直接的に描写するよりもぼかした方がより表現として優れているという話もあります。</dt>
				<dd>えっちな話をしないでください。</dd>
				<dt>文章主体ということもあり基準はぼかしますが、R-17程度に収めてください。</dt>
				<dd>未成年者にも見せられる健全なゲームを目指してください。</dd>
				<dt>あまり過激なゴア表現は避けてください。</dt>
				<dd>過剰なF5連打や、目についた人全員に戦いを仕掛けて回るみたいなことはやめてください。</dd>
				<dt>サーバーの処理能力はプレイヤーみんなの共有資産です。</dt>
			</dl>
		</div>
	</div>
</body>
